---
import CodeBlock from "./CodeBlock";
---

<section id="install" class="relative py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-6xl mx-auto">
    <!-- Section header -->
    <div class="text-center mb-16 fade-in-on-scroll">
      <h2 class="text-4xl sm:text-5xl font-bold gradient-text mb-6">
        Quick Install
      </h2>
      <p class="text-xl text-muted-foreground max-w-3xl mx-auto">
        Get MCP-Obsidian running in seconds with any MCP-compatible platform
      </p>
    </div>

    <!-- Installation steps -->
    <div class="space-y-8">
      <!-- Step 1: Configure AI Platform -->
      <div class="fade-in-on-scroll">
        <div class="flex items-center gap-3 mb-4">
          <div
            class="w-8 h-8 rounded-full bg-accent text-background flex items-center justify-center font-bold"
          >
            1
          </div>
          <h3 class="text-xl font-semibold text-foreground">
            Configure Your AI Platform
          </h3>
        </div>

        <div class="terminal-window">
          <div class="terminal-header">
            <span class="terminal-button red"></span>
            <span class="terminal-button yellow"></span>
            <span class="terminal-button green"></span>
            <span class="terminal-title">AI Platform Config</span>
          </div>
          <div class="p-6 relative">
            <!-- Tab switcher -->
            <div class="flex flex-wrap gap-2 mb-6">
              <button class="config-tab active" data-tab="standard">
                Claude Desktop / ChatGPT+
              </button>
              <button class="config-tab" data-tab="claude-code">
                Claude Code
              </button>
              <button class="config-tab" data-tab="codex">
                OpenAI Codex
              </button>
            </div>

            <!-- Standard config (Claude Desktop / ChatGPT+) -->
            <div class="config-content" data-content="standard">
              <button
                class="absolute top-4 right-4 p-2 hover:bg-card/50 rounded transition-colors copy-btn z-10"
                data-copy='{"mcpServers": {"obsidian": {"command": "npx", "args": ["@mauricio.wolff/mcp-obsidian@latest", "/path/to/your/vault"]}}}'
                title="Copy configuration"
                aria-label="Copy configuration to clipboard"
              >
                <svg
                  class="w-4 h-4 text-muted-foreground hover:text-foreground"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                  ></path>
                </svg>
              </button>
              <CodeBlock
                client:only="react"
                code={`{
  "mcpServers": {
    "obsidian": {
      "command": "npx",
      "args": ["@mauricio.wolff/mcp-obsidian@latest", "/path/to/your/vault"]
    }
  }
}`}
              />
            </div>

            <!-- Claude Code config -->
            <div class="config-content hidden" data-content="claude-code">
              <button
                class="absolute top-4 right-4 p-2 hover:bg-card/50 rounded transition-colors copy-btn z-10"
                data-copy='claude mcp add-json obsidian &apos;{"type":"stdio","command":"npx","args":["@mauricio.wolff/mcp-obsidian@latest","/path/to/your/vault"]}&apos;'
                title="Copy configuration"
                aria-label="Copy configuration to clipboard"
              >
                <svg
                  class="w-4 h-4 text-muted-foreground hover:text-foreground"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                  ></path>
                </svg>
              </button>
              <div
                class="font-mono text-sm code-scroll"
                style="background: #1e1e2e77; padding: 1em; border-radius: 0.3em;"
              >
                <pre
                  style="margin: 0; color: #cdd6f4; line-height: 1.5; white-space: nowrap;"><span style="color: #cba6f7;">claude</span> <span style="color: #89b4fa;">mcp add-json</span> <span style="color: #a6e3a1;">obsidian</span> <span style="color: #f38ba8;">'&#123;"type":"stdio","command":"npx","args":["@mauricio.wolff/mcp-obsidian@latest","/path/to/your/vault"]&#125;'</span></pre>
              </div>

              <div
                class="mt-4 p-3 bg-warning/10 rounded-lg border border-warning/30"
              >
                <div class="flex items-start gap-2">
                  <div class="text-warning text-lg mt-0.5">‚ö†Ô∏è</div>
                  <div class="flex-1">
                    <p class="text-sm font-semibold text-warning mb-2">
                      Important: Per-Project Configuration Required
                    </p>
                    <p class="text-xs text-muted-foreground leading-relaxed">
                      Claude Code requires MCP servers to be configured <strong
                        >per-project</strong
                      >. You must run the <code
                        class="bg-background/50 px-1 rounded text-foreground"
                        >claude mcp add-json</code
                      > command while inside each project directory where you want
                      to use MCP-Obsidian.
                    </p>
                    <p
                      class="text-xs text-muted-foreground leading-relaxed mt-2"
                    >
                      If you configure it globally or in a different directory,
                      individual projects will not have access to the MCP server
                      configuration.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- OpenAI Codex config (TOML) -->
            <div class="config-content hidden" data-content="codex">
              <button
                class="absolute top-4 right-4 p-2 hover:bg-card/50 rounded transition-colors copy-btn z-10"
                data-copy='[mcp_servers.obsidian]
command = "npx"
args = ["@mauricio.wolff/mcp-obsidian@latest", "/path/to/your/vault"]'
                title="Copy configuration"
                aria-label="Copy configuration to clipboard"
              >
                <svg
                  class="w-4 h-4 text-muted-foreground hover:text-foreground"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                  ></path>
                </svg>
              </button>
              <div
                class="font-mono text-sm"
                style="background: #1e1e2e77; padding: 1em; border-radius: 0.3em;"
              >
                <pre
                  style="margin: 0; color: #cdd6f4; line-height: 1.5;"><span style="color: #cba6f7;">[mcp_servers.obsidian]</span>
<span style="color: #89b4fa;">command</span> <span style="color: #94e2d5;">=</span> <span style="color: #a6e3a1;">"npx"</span>
<span style="color: #89b4fa;">args</span> <span style="color: #94e2d5;">=</span> <span style="color: #cdd6f4;">[</span><span style="color: #a6e3a1;">"@mauricio.wolff/mcp-obsidian@latest"</span><span style="color: #cdd6f4;">,</span> <span style="color: #a6e3a1;">"/path/to/your/vault"</span><span style="color: #cdd6f4;">]</span></pre>
              </div>
            </div>
          </div>
        </div>

        <!-- Configuration locations -->
        <div class="mt-4 p-4 bg-card/30 rounded-lg border border-border/50">
          <p class="text-sm text-muted-foreground mb-3">
            üìç <strong>Config file locations:</strong>
          </p>
          <div class="grid md:grid-cols-2 gap-4 text-xs">
            <div>
              <div class="font-semibold text-accent text-sm mb-2">
                Claude Desktop (JSON)
              </div>
              <div class="space-y-1 text-muted-foreground">
                <div>
                  macOS: <code
                    class="bg-background/50 px-1 rounded text-foreground"
                    >~/Library/Application
                    Support/Claude/claude_desktop_config.json</code
                  >
                </div>
                <div>
                  Windows: <code
                    class="bg-background/50 px-1 rounded text-foreground"
                    >%APPDATA%\Claude\claude_desktop_config.json</code
                  >
                </div>
              </div>
            </div>
            <div>
              <div class="font-semibold text-accent text-sm mb-2">
                Claude Code (CLI)
              </div>
              <div class="space-y-1 text-muted-foreground">
                <div>
                  <span class="text-warning">‚ö†Ô∏è</span>
                  <strong>Per-project only:</strong> Run <code
                    class="bg-background/50 px-1 rounded text-foreground"
                    >claude mcp add-json obsidian '&#123;...&#125;'</code
                  > inside your project directory
                </div>
              </div>
            </div>
            <div>
              <div class="font-semibold text-accent text-sm mb-2">
                ChatGPT+ Desktop (JSON)
              </div>
              <div class="space-y-1 text-muted-foreground">
                <div>
                  macOS: <code
                    class="bg-background/50 px-1 rounded text-foreground"
                    >~/Library/Application Support/ChatGPT/chatgpt_config.json</code
                  >
                </div>
                <div>
                  Windows: <code
                    class="bg-background/50 px-1 rounded text-foreground"
                    >%APPDATA%\ChatGPT\chatgpt_config.json</code
                  >
                </div>
              </div>
            </div>
            <div>
              <div class="font-semibold text-accent text-sm mb-2">
                OpenAI Codex (TOML)
              </div>
              <div class="space-y-1 text-muted-foreground">
                <div>
                  macOS/Linux: <code
                    class="bg-background/50 px-1 rounded text-foreground"
                    >~/.codex/config.toml</code
                  >
                </div>
                <div>
                  Windows: <code
                    class="bg-background/50 px-1 rounded text-foreground"
                    >%USERPROFILE%\.codex\config.toml</code
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="mt-3 p-3 bg-accent/10 rounded-lg border border-accent/20">
            <p class="text-sm text-foreground">
              ‚ö° <strong>No pre-installation needed!</strong> npx automatically downloads
              and runs the server when needed.
            </p>
          </div>
        </div>
      </div>

      <!-- Step 2: Developers - MCP Inspector -->
      <div class="fade-in-on-scroll">
        <div class="flex items-center gap-3 mb-4">
          <div
            class="w-8 h-8 rounded-full bg-accent-2 text-background flex items-center justify-center font-bold"
          >
            2
          </div>
          <h3 class="text-xl font-semibold text-foreground">
            Developers: Test with MCP Inspector
          </h3>
        </div>

        <div class="terminal-window">
          <div class="terminal-header">
            <span class="terminal-button red"></span>
            <span class="terminal-button yellow"></span>
            <span class="terminal-button green"></span>
            <span class="terminal-title">Terminal</span>
          </div>
          <div class="p-6">
            <div class="space-y-3 font-mono text-sm">
              <div class="text-muted-foreground">
                # Install MCP Inspector globally
              </div>
              <div class="flex items-center gap-2">
                <span class="text-accent">$</span>
                <span class="text-foreground"
                  >npm install -g @modelcontextprotocol/inspector</span
                >
                <button
                  class="ml-auto p-1 hover:bg-card/50 rounded transition-colors copy-btn"
                  data-copy="npm install -g @modelcontextprotocol/inspector"
                  title="Copy to clipboard"
                  aria-label="Copy npm install command to clipboard"
                >
                  <svg
                    class="w-4 h-4 text-muted-foreground hover:text-foreground"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                    ></path>
                  </svg>
                </button>
              </div>

              <div class="text-muted-foreground">
                # Test MCP-Obsidian server
              </div>
              <div class="flex items-center gap-2">
                <span class="text-accent">$</span>
                <span class="text-foreground"
                  >mcp-inspector npx @mauricio.wolff/mcp-obsidian@latest
                  /path/to/vault</span
                >
                <button
                  class="ml-auto p-1 hover:bg-card/50 rounded transition-colors copy-btn"
                  data-copy="mcp-inspector npx @mauricio.wolff/mcp-obsidian@latest /path/to/vault"
                  title="Copy to clipboard"
                  aria-label="Copy test command to clipboard"
                >
                  <svg
                    class="w-4 h-4 text-muted-foreground hover:text-foreground"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                    ></path>
                  </svg>
                </button>
              </div>

              <div class="text-success pl-4">
                üåê Opens interactive web interface at http://localhost:5173
              </div>
            </div>
          </div>
        </div>

        <div class="mt-4 p-4 bg-card/30 rounded-lg border border-border/50">
          <p class="text-sm text-muted-foreground mb-3">
            üîç <strong>MCP Inspector</strong> provides a web UI to test all MCP methods
            interactively.
          </p>
          <div class="text-sm space-y-2">
            <div class="text-foreground font-medium">Perfect for:</div>
            <ul
              class="list-disc list-inside ml-4 space-y-1 text-muted-foreground"
            >
              <li>Testing server functionality before integration</li>
              <li>Debugging MCP method calls and responses</li>
              <li>Exploring available tools and resources</li>
              <li>Development and troubleshooting</li>
            </ul>
            <div
              class="flex items-center gap-2 text-xs text-muted-foreground mt-3"
            >
              <svg
                class="w-3 h-3 text-accent"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  clip-rule="evenodd"></path>
              </svg>
              <a
                href="https://github.com/bitbonsai/mcp-obsidian"
                target="_blank"
                class="underline hover:text-foreground"
                >View on GitHub for more details</a
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Other Platforms -->
      <div class="fade-in-on-scroll">
        <div
          class="mb-4 p-4 bg-gradient-to-r from-accent/10 to-accent-2/10 rounded-lg border border-accent/20"
        >
          <p class="text-sm text-foreground text-center">
            üåê <strong>Works with all MCP-compatible platforms:</strong> Cursor IDE,
            Windsurf, and more coming soon!
            <br />Use the same configuration with your platform's MCP server
            settings.
          </p>
        </div>
        <div
          class="p-6 bg-gradient-to-r from-accent/10 to-accent-2/10 rounded-lg border border-accent/20"
        >
          <p class="text-sm text-foreground mb-4">
            üîí <strong class="text-base">What "private" means:</strong>
          </p>

          <div class="space-y-2 text-sm text-foreground/90">
            <div class="flex items-start gap-2">
              <span class="text-green-500 mt-0.5">‚úì</span>
              <span>Your vault files stay on your computer</span>
            </div>

            <div class="flex items-start gap-2">
              <span class="text-green-500 mt-0.5">‚úì</span>
              <span>We never see, store, or transmit your data</span>
            </div>

            <div class="flex items-start gap-2">
              <span class="text-green-500 mt-0.5">‚úì</span>
              <span>Only you and your AI assistant can access your notes</span>
            </div>

            <div class="flex items-start gap-2">
              <span class="text-red-400 mt-0.5">‚úó</span>
              <span
                >AI providers (Anthropic, OpenAI) process content you share with
                them</span
              >
            </div>
          </div>

          <div class="mt-4 pt-4 border-t border-accent/20">
            <p class="text-sm text-foreground/70">
              For commercial Claude users: Your data won't be used for AI
              training.
            </p>
          </div>
        </div>
      </div>

      <!-- Success message -->
      <div class="fade-in-on-scroll">
        <div class="p-6 bg-success/10 border border-success/20 rounded-xl">
          <div class="flex items-center gap-3 mb-3">
            <div
              class="w-8 h-8 rounded-full bg-success text-background flex items-center justify-center"
            >
              ‚úì
            </div>
            <h3 class="text-xl font-semibold text-success">You're all set!</h3>
          </div>
          <p class="text-muted-foreground mb-4">
            Restart your AI platform and you'll see MCP-Obsidian connected. Your
            AI assistant can now safely read, search, and manage your Obsidian
            vault.
          </p>
          <div class="flex flex-wrap gap-2">
            <span
              class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-success/20 text-success text-sm"
            >
              üîç Search notes
            </span>
            <span
              class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-success/20 text-success text-sm"
            >
              üìù Edit content
            </span>
            <span
              class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-success/20 text-success text-sm"
            >
              üóÇÔ∏è Organize files
            </span>
            <span
              class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-success/20 text-success text-sm"
            >
              ‚ö° Batch operations
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Copy to clipboard functionality
  document.addEventListener("DOMContentLoaded", () => {
    const copyButtons = document.querySelectorAll(".copy-btn");

    copyButtons.forEach((button) => {
      button.addEventListener("click", async () => {
        const textToCopy = button.getAttribute("data-copy");

        if (!textToCopy) return;

        try {
          await navigator.clipboard.writeText(textToCopy);

          // Show success feedback
          const originalSvg = button.innerHTML;
          button.innerHTML = `
            <svg class="w-4 h-4 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
          `;

          setTimeout(() => {
            button.innerHTML = originalSvg;
          }, 2000);
        } catch (err) {
          console.error("Failed to copy text: ", err);
        }
      });
    });

    // Tab switching functionality
    const configTabs = document.querySelectorAll(".config-tab");
    const configContents = document.querySelectorAll(".config-content");

    configTabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        const targetTab = tab.getAttribute("data-tab");

        // Update active states
        configTabs.forEach((t) => t.classList.remove("active"));
        tab.classList.add("active");

        // Show/hide content
        configContents.forEach((content) => {
          const contentTab = content.getAttribute("data-content");
          if (contentTab === targetTab) {
            content.classList.remove("hidden");
          } else {
            content.classList.add("hidden");
          }
        });
      });
    });
  });
</script>

<style>
  /* Enhance code syntax highlighting */
  pre code {
    color: var(--color-foreground);
  }

  /* JSON syntax highlighting */
  pre code {
    background: transparent;
  }

  /* Copy button hover effects */
  .copy-btn:hover {
    transform: scale(1.05);
  }

  /* Terminal window improvements */
  .terminal-window {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  }

  /* Hide scrollbar while maintaining scroll functionality */
  .code-scroll {
    overflow-x: auto;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }

  .code-scroll::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  /* Config tab styles - matching InteractiveDemo */
  .config-tab {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    border-radius: 0.75rem;
    font-weight: 500;
    transition: all 0.3s ease;
    cursor: pointer;
    background: rgba(var(--color-card-rgb, 24, 24, 27), 0.5);
    color: var(--color-muted);
    border: 1px solid rgba(var(--color-border-rgb, 63, 63, 70), 0.5);
    outline: none;
  }

  .config-tab:hover {
    color: var(--color-foreground);
    background: var(--color-card);
  }

  .config-tab.active {
    background: #7c3aed;
    color: #ffffff;
    border: none;
    outline: none;
    box-shadow:
      0 10px 15px -3px rgba(124, 58, 237, 0.25),
      0 4px 6px -2px rgba(124, 58, 237, 0.25);
  }

  .config-tab:focus {
    outline: none;
  }

  .config-tab:focus-visible {
    outline: 2px solid rgba(139, 92, 246, 0.5);
    outline-offset: 2px;
  }

  /* Mobile responsiveness */
  @media (max-width: 640px) {
    .terminal-window pre {
      font-size: 0.75rem;
      line-height: 1.4;
    }

    .grid.md\:grid-cols-2 {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    code {
      font-size: 0.7rem !important;
      word-break: break-all;
    }

    .config-tab {
      font-size: 0.8rem;
      padding: 0.625rem 0.875rem;
      flex: 1 1 auto;
      min-width: fit-content;
      justify-content: center;
    }
  }
</style>
