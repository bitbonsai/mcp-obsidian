---
import CodeBlock from './CodeBlock';

interface Props {
  title: string;
  description: string;
  icon: string;
  size?: 'small' | 'medium' | 'large';
  accent?: boolean;
  codeExample?: string;
}

const {
  title,
  description,
  icon,
  size = 'medium',
  accent = false,
  codeExample
} = Astro.props;

const sizeClasses = {
  small: 'col-span-1 row-span-1',
  medium: 'col-span-2 row-span-1 md:col-span-1',
  large: 'col-span-2 row-span-2'
};

const cardClasses = `
  ${sizeClasses[size]}
  group
  relative
  overflow-hidden
  rounded-2xl
  border
  border-border/50
  bg-card/50
  backdrop-blur-xl
  p-6
  transition-all
  duration-500
  hover:border-accent/50
  hover:shadow-2xl
  hover:shadow-accent/20
  hover:scale-[1.02]
  fade-in-on-scroll
`;
---

<div class={cardClasses}>
  <!-- Gradient overlay on hover -->
  <div class="absolute inset-0 bg-gradient-to-br from-accent/10 to-accent-2/10 opacity-0 transition-opacity duration-500 group-hover:opacity-100" />

  <!-- Glow effect for accent cards -->
  {accent && (
    <div class="absolute inset-0 bg-gradient-to-br from-accent/20 to-accent-2/20 opacity-50 animate-pulse" />
  )}

  <!-- Content -->
  <div class="relative z-10 h-full flex flex-col">
    <!-- Icon and title -->
    <div class="flex items-start gap-4 mb-4">
      <div class="text-4xl transform transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3">
        {icon}
      </div>
      <div class="flex-1">
        <h3 class="text-xl font-semibold text-foreground mb-2 group-hover:text-accent transition-colors duration-300">
          {title}
        </h3>
        <p class="text-muted-foreground leading-relaxed">
          {description}
        </p>
      </div>
    </div>

    <!-- Code example for large cards -->
    {codeExample && size === 'large' && (
      <div class="mt-auto">
        <div class="bg-background/50 rounded-lg border border-border/30 overflow-hidden">
          <CodeBlock client:only="react" code={codeExample} />
        </div>
      </div>
    )}


    <!-- Floating particles for visual interest -->
    <div class="absolute top-4 right-4 w-2 h-2 bg-accent/30 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-pulse" style="animation-delay: 0.5s;" />
    <div class="absolute bottom-8 left-8 w-1 h-1 bg-accent-2/30 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-pulse" style="animation-delay: 1s;" />
  </div>

  <!-- Border glow effect -->
  <div class="absolute inset-0 rounded-2xl border border-accent/30 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none" />
</div>

<style>
  /* Custom hover animations */
  @media (min-width: 768px) {
    .bento-item-large:hover {
      transform: scale(1.02) translateY(-4px);
    }

    .bento-item-medium:hover {
      transform: scale(1.03) translateY(-2px);
    }

    .bento-item-small:hover {
      transform: scale(1.05) translateY(-1px);
    }
  }

  /* Code syntax highlighting */
  code {
    background: transparent;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .col-span-2 {
      grid-column: span 1;
    }

    .row-span-2 {
      grid-row: span 1;
    }
  }
</style>