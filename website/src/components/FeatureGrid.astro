---
import FeatureCard from "./FeatureCard.astro";

// Features data with code examples
const searchCodeExample = `[
  {
    "p": "Notes/GTD.md",
    "t": "GTD",
    "ex": "...getting things done...",
    "mc": 5,
    "ln": 12
  },
  {
    "p": "Books/Deep Work.md",
    "t": "Deep Work",
    "ex": "...focus and productivity...",
    "mc": 8,
    "ln": 45
  }
]`;

const frontmatterExample = `{
  "status": "completed",
  "tags": ["web", "typescript"],
  "completed": "2025-01-20"
}`;
---

<section
  class="relative py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-background via-background/95 to-background"
>
  <div class="max-w-7xl mx-auto">
    <!-- Section header -->
    <div class="text-center mb-16 fade-in-on-scroll">
      <h2 class="text-4xl sm:text-5xl font-bold gradient-text mb-6">
        Core Features
      </h2>
      <p class="text-xl text-muted-foreground max-w-3xl mx-auto">
        Designed for safety, performance, and developer experience. Every
        feature gives AI intelligent access without compromising your data.
      </p>
    </div>

    <!-- Bento grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Large card: Intelligent Search -->
      <FeatureCard
        title="ðŸ” Powerful Search"
        description="Fast full-text search with multi-word matching and BM25 relevance ranking. AI can locate notes by content, tags, or metadata instantly."
        icon="ðŸŽ¯"
        size="large"
        accent={true}
        codeExample={searchCodeExample}
      />

      <!-- Medium cards -->
      <FeatureCard
        title="ðŸ“ Safe Frontmatter Handling"
        description="YAML parser validates and preserves formatting, ensuring safe atomic updates to note metadata."
        icon="ðŸ›¡ï¸"
        size="medium"
        codeExample={frontmatterExample}
      />

      <FeatureCard
        title="âš¡ File Operations"
        description="Read, write, and manage notes safely. Create, update, and organize your vault with AI assistance."
        icon="ðŸš€"
        size="medium"
      />

      <FeatureCard
        title="ðŸ”’ Security First"
        description="Path traversal protection and safe file operations. Controlled AI access through MCP protocol."
        icon="ðŸ”"
        size="medium"
      />

      <!-- Small cards -->
      <FeatureCard
        title="Node.js Compatible"
        description="Built with Node.js for broad compatibility and ecosystem support."
        icon="ðŸŸ¢"
        size="small"
      />

      <FeatureCard
        title="Token Optimized"
        description="Minified JSON field names and compact responses. Less token usage means faster, cheaper API calls."
        icon="ðŸ’°"
        size="small"
      />

      <FeatureCard
        title="TypeScript"
        description="Fully typed for excellent developer experience."
        icon="ðŸ“˜"
        size="small"
      />

      <FeatureCard
        title="Open Source"
        description="MIT licensed and community driven."
        icon="â¤ï¸"
        size="small"
      />

      <!-- Additional medium card -->
      <FeatureCard
        title="ðŸ”§ Complete Toolkit"
        description="13 MCP tools for vault management: read/write/patch files, search content, manage tags, update frontmatter, vault stats, and more. Built for AI assistant integration."
        icon="ðŸ› ï¸"
        size="medium"
      />

      <FeatureCard
        title="ðŸŽ¯ Multi-Platform"
        description="Works with Claude Desktop, ChatGPT+ Desktop, OpenCode, Gemini CLI, OpenAI Codex, Cursor, Windsurf, IntelliJ, and other MCP-compatible AI platforms."
        icon="ðŸŒ"
        size="medium"
      />
    </div>

  </div>
</section>

<style>
  /* Grid improvements for better responsive behavior */
  @media (min-width: 1024px) {
    .grid {
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, minmax(200px, auto));
    }

    /* Large card takes up 2x2 space */
    .grid > :first-child {
      grid-column: 1 / 3;
      grid-row: 1 / 3;
    }

    /* Medium cards take specific positions */
    .grid > :nth-child(2) {
      grid-column: 3;
      grid-row: 1;
    }

    .grid > :nth-child(3) {
      grid-column: 3;
      grid-row: 2;
    }

    .grid > :nth-child(4) {
      grid-column: 1;
      grid-row: 3;
    }

    /* Small cards in the remaining space */
    .grid > :nth-child(5) {
      grid-column: 2;
      grid-row: 3;
    }

    .grid > :nth-child(6) {
      grid-column: 3;
      grid-row: 3;
    }
  }

  /* Animation stagger effect */
  .fade-in-on-scroll:nth-child(odd) {
    animation-delay: 0.1s;
  }

  .fade-in-on-scroll:nth-child(even) {
    animation-delay: 0.2s;
  }

  /* Performance stats animation */
  .text-3xl {
    background: linear-gradient(135deg, currentColor, currentColor);
    -webkit-background-clip: text;
    background-clip: text;
  }
</style>
