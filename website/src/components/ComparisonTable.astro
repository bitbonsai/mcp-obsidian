---
// Comparison data structure
const features = [
  {
    name: 'Setup Complexity',
    mcpObsidian: { status: 'success', text: 'Simple', description: 'Just point to vault path - works instantly' },
    otherMcpObsidian: { status: 'error', text: 'Complex', description: 'Requires Obsidian plugin + API key setup' },
    genericFs: { status: 'warning', text: 'Moderate', description: 'Basic MCP configuration needed' },
    directAccess: { status: 'warning', text: 'Variable', description: 'Depends on chosen approach' }
  },
  {
    name: 'Obsidian Running Required',
    mcpObsidian: { status: 'success', text: 'No', description: 'Works with closed Obsidian - direct file access' },
    otherMcpObsidian: { status: 'error', text: 'Yes', description: 'Obsidian must be running with REST API plugin' },
    genericFs: { status: 'success', text: 'No', description: 'Direct filesystem access' },
    directAccess: { status: 'success', text: 'No', description: 'Direct file manipulation' }
  },
  {
    name: 'Plugin Dependencies',
    mcpObsidian: { status: 'success', text: 'None', description: 'Zero dependencies - pure file system access' },
    otherMcpObsidian: { status: 'error', text: 'Required', description: 'Needs Local REST API community plugin' },
    genericFs: { status: 'success', text: 'None', description: 'Standard filesystem MCP' },
    directAccess: { status: 'success', text: 'None', description: 'No additional software needed' }
  },
  {
    name: 'Frontmatter Safety',
    mcpObsidian: { status: 'success', text: 'Protected', description: 'Advanced YAML parsing with validation' },
    otherMcpObsidian: { status: 'warning', text: 'API-dependent', description: 'Safety depends on Obsidian API implementation' },
    genericFs: { status: 'error', text: 'Can corrupt', description: 'Raw file editing risks corruption' },
    directAccess: { status: 'error', text: 'Can corrupt', description: 'No safety mechanisms' }
  },
  {
    name: 'Built-in Search',
    mcpObsidian: { status: 'success', text: 'Advanced', description: 'Full-text search with BM25 relevance ranking' },
    otherMcpObsidian: { status: 'success', text: 'Good', description: 'Uses Obsidian\'s search via API' },
    genericFs: { status: 'error', text: 'None', description: 'Must manually search directories' },
    directAccess: { status: 'error', text: 'None', description: 'Basic grep at best' }
  },
  {
    name: 'Performance',
    mcpObsidian: { status: 'success', text: 'Fast', description: 'Optimized for large vaults with batch I/O' },
    otherMcpObsidian: { status: 'warning', text: 'API overhead', description: 'HTTP API calls add latency' },
    genericFs: { status: 'warning', text: 'Slow', description: 'No vault-specific optimizations' },
    directAccess: { status: 'warning', text: 'Variable', description: 'Depends on system capabilities' }
  },
  {
    name: 'Link Handling',
    mcpObsidian: { status: 'success', text: 'Safe', description: 'Preserves note content and frontmatter during moves' },
    otherMcpObsidian: { status: 'success', text: 'Good', description: 'Leverages Obsidian\'s link management' },
    genericFs: { status: 'error', text: 'Breaks links', description: 'No understanding of Obsidian format' },
    directAccess: { status: 'error', text: 'Breaks links', description: 'Can corrupt references' }
  },
  {
    name: 'Reliability',
    mcpObsidian: { status: 'success', text: 'High', description: 'Direct file access - no intermediary failures' },
    otherMcpObsidian: { status: 'warning', text: 'Plugin-dependent', description: 'Can fail if Obsidian crashes or plugin issues' },
    genericFs: { status: 'warning', text: 'Basic', description: 'Standard filesystem reliability' },
    directAccess: { status: 'warning', text: 'Variable', description: 'Depends on implementation quality' }
  }
];

const statusIcons: Record<string, string> = {
  success: '✅',
  warning: '⚠️',
  error: '❌'
};

const statusColors: Record<string, string> = {
  success: 'text-success',
  warning: 'text-warning',
  error: 'text-error'
};
---

<section class="relative py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-background to-card/10">
  <div class="max-w-7xl mx-auto">
    <!-- Section header -->
    <div class="text-center mb-16 fade-in-on-scroll">
      <h2 class="text-4xl sm:text-5xl font-bold gradient-text mb-6">
        Why Choose MCP-Obsidian?
      </h2>
      <p class="text-xl text-muted-foreground max-w-3xl mx-auto">
        See how MCP-Obsidian compares to generic filesystem access and direct file manipulation.
        Purpose-built for Obsidian means better safety, performance, and intelligence.
      </p>
    </div>

    <!-- Comparison table -->
    <div class="fade-in-on-scroll">
      <div class="overflow-x-auto">
        <div class="min-w-full bg-card/30 backdrop-blur-xl rounded-2xl border border-border/50 overflow-hidden">
          <!-- Table header -->
          <div class="bg-card/50 border-b border-border/50">
            <div class="grid grid-cols-5 gap-4 p-6">
              <div class="font-semibold text-foreground">Feature</div>
              <div class="text-center">
                <div class="font-semibold text-accent mb-1">MCP-Obsidian</div>
                <div class="text-xs text-muted-foreground">This package</div>
              </div>
              <div class="text-center">
                <div class="font-semibold text-muted-foreground mb-1">Other MCP-Obsidian</div>
                <div class="text-xs text-muted-foreground">Plugin-based</div>
              </div>
              <div class="text-center">
                <div class="font-semibold text-muted-foreground mb-1">Generic FS MCP</div>
                <div class="text-xs text-muted-foreground">Basic file access</div>
              </div>
              <div class="text-center">
                <div class="font-semibold text-muted-foreground mb-1">Direct File Access</div>
                <div class="text-xs text-muted-foreground">Manual approach</div>
              </div>
            </div>
          </div>

          <!-- Table body -->
          <div class="divide-y divide-border/30">
            {features.map((feature, index) => (
              <div
                class="grid grid-cols-5 gap-4 p-6 hover:bg-card/20 transition-colors duration-300"
                style={`animation-delay: ${index * 0.1}s`}
              >
                <!-- Feature name -->
                <div class="font-medium text-foreground flex items-center">
                  {feature.name}
                </div>

                <!-- MCP-Obsidian (This package) -->
                <div class="text-center">
                  <div class="flex flex-col items-center gap-1 mb-2">
                    <div class="text-2xl">{statusIcons[feature.mcpObsidian.status]}</div>
                    <span class={`font-semibold ${statusColors[feature.mcpObsidian.status]}`}>
                      {feature.mcpObsidian.text}
                    </span>
                  </div>
                  <div class="text-xs text-muted-foreground">
                    {feature.mcpObsidian.description}
                  </div>
                </div>

                <!-- Other MCP-Obsidian (Plugin-based) -->
                <div class="text-center">
                  <div class="flex flex-col items-center gap-1 mb-2">
                    <div class="text-2xl">{statusIcons[feature.otherMcpObsidian.status]}</div>
                    <span class={`font-semibold ${statusColors[feature.otherMcpObsidian.status]}`}>
                      {feature.otherMcpObsidian.text}
                    </span>
                  </div>
                  <div class="text-xs text-muted-foreground">
                    {feature.otherMcpObsidian.description}
                  </div>
                </div>

                <!-- Generic FS MCP -->
                <div class="text-center">
                  <div class="flex flex-col items-center gap-1 mb-2">
                    <div class="text-2xl">{statusIcons[feature.genericFs.status]}</div>
                    <span class={`font-semibold ${statusColors[feature.genericFs.status]}`}>
                      {feature.genericFs.text}
                    </span>
                  </div>
                  <div class="text-xs text-muted-foreground">
                    {feature.genericFs.description}
                  </div>
                </div>

                <!-- Direct File Access -->
                <div class="text-center">
                  <div class="flex flex-col items-center gap-1 mb-2">
                    <div class="text-2xl">{statusIcons[feature.directAccess.status]}</div>
                    <span class={`font-semibold ${statusColors[feature.directAccess.status]}`}>
                      {feature.directAccess.text}
                    </span>
                  </div>
                  <div class="text-xs text-muted-foreground">
                    {feature.directAccess.description}
                  </div>
                </div>
              </div>
            ))}
          </div>

          <!-- Table footer with summary -->
          <div class="bg-gradient-to-r from-accent/10 to-accent-2/10 border-t border-border/50 p-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="text-center">
                <div class="text-2xl font-bold text-accent mb-2">8/8</div>
                <div class="text-sm text-muted-foreground">Features with clear advantage</div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-success mb-2">Zero</div>
                <div class="text-sm text-muted-foreground">Plugin dependencies required</div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-warning mb-2">Instant</div>
                <div class="text-sm text-muted-foreground">Setup time (vs hours)</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Call to action -->
    <div class="text-center mt-12 fade-in-on-scroll">
      <div class="flex flex-col items-center gap-6 p-6 bg-card/20 backdrop-blur-xl rounded-2xl border border-border/50">
        <div class="flex flex-col sm:flex-row gap-3">
          <a
            href="/install"
            class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-accent hover:bg-accent/90 text-white font-semibold transition-all duration-300 hover:shadow-[0_0_20px_rgba(139,92,246,0.6)] hover:-translate-y-1 hover:scale-105"
          >
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
            Install Now
          </a>
          <a
            href="https://github.com/bitbonsai/mcp-obsidian"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 px-6 py-3 rounded-xl border border-border/50 hover:border-accent/50 text-foreground font-semibold transition-all duration-300 glass"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            View Source
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Enhanced table styling */
  .grid {
    @apply items-center;
  }

  /* Mobile responsiveness - keep horizontal scroll on small screens */
  @media (max-width: 1024px) {
    .overflow-x-auto {
      /* Ensure horizontal scrolling is preserved */
      overflow-x: auto !important;
    }

    .min-w-full {
      min-width: 800px; /* Maintain minimum table width for proper columns */
    }
  }

  /* Animation for table rows */
  .fade-in-on-scroll {
    opacity: 0;
    transform: translateY(1rem);
    animation: fade-in-up 0.6s ease-out forwards;
  }

  /* Hover effects */
  .grid:hover {
    transform: translateX(4px);
    transition: transform 0.2s ease;
  }

  /* Status indicators */
  .text-success {
    color: var(--color-success);
  }

  .text-warning {
    color: var(--color-warning);
  }

  .text-error {
    color: var(--color-error);
  }

</style>
